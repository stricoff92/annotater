<!DOCTYPE html>
<html>

    <head>
        {% if tab_title %}
            <title>{{ tab_title }}</title>
        {% else %}
            <title>Annotater</title>
        {% endif %}

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        {% load static %}

        <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous">
        </script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <style>
            @media only screen and (max-width: 500px) {
                #potato-svg {
                    display: none;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="jumbotron mt-2 pt-2 pb-3 mb-2">
                <div style="display:flex;justify-content:space-between;">
                    <h2 class="text-center">
                        Anno-Tater
                        <img src="{% static 'potato.svg' %}" height="60px" id="potato-svg">
                    </h2>
                    <div class="mt-2">
                        <span>
                            Logged in as
                            <strong>{{ user.username }}</strong></a>,
                        </span>
                        <br>
                        <span class="ml-1">
                            <a href="{% url 'user-logout' %}">logout</a>,
                        </span>
                        {% if user.is_superuser %}
                            <span class="ml-1">
                                <a href="/admin/">admin</a>
                            </span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% block 'body' %}
            {% endblock %}
        </div>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment-with-locales.min.js"></script>



        {% csrf_token %}
        <script>
            $(document).ready(()=>{
                window.csrftoken = document.querySelector("input[name=csrfmiddlewaretoken]").value;
                function csrfSafeMethod(method) {
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }
                $.ajaxSetup({
                    beforeSend: function(xhr, settings) {
                        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                            xhr.setRequestHeader("X-CSRFToken", window.csrftoken);
                        }
                    }
                });
            })
            function numberWithCommas(x) {
                return (x-0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            function numberWithCommasAndPlus(x) {
                const isPositive = (x-0) > 0
                const prefix = isPositive ? "+" : ""
                return prefix + (x-0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            function postJson(url, data, successCb, errorCb) {
                $.ajax({
                    url,
                    type:'POST',
                    data:JSON.stringify(data),
                    contentType: 'application/json',
                    success:successCb,
                    error:errorCb,
                })
            }

            function postFormData(url, data, successCb, errorCb) {
                $.ajax({
                    url,
                    type:'POST',
                    data,
                    contentType: false,
                    processData: false,
                    success:successCb,
                    error:errorCb,
                })
            }

            // Object.keys polyfill
            if (!Object.keys) {
                Object.keys = (function() {
                    'use strict';
                    var hasOwnProperty = Object.prototype.hasOwnProperty,
                        hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),
                        dontEnums = [
                        'toString',
                        'toLocaleString',
                        'valueOf',
                        'hasOwnProperty',
                        'isPrototypeOf',
                        'propertyIsEnumerable',
                        'constructor'
                        ],
                        dontEnumsLength = dontEnums.length;

                    return function(obj) {
                    if (typeof obj !== 'function' && (typeof obj !== 'object' || obj === null)) {
                        throw new TypeError('Object.keys called on non-object');
                    }

                    var result = [], prop, i;

                    for (prop in obj) {
                        if (hasOwnProperty.call(obj, prop)) {
                        result.push(prop);
                        }
                    }

                    if (hasDontEnumBug) {
                        for (i = 0; i < dontEnumsLength; i++) {
                        if (hasOwnProperty.call(obj, dontEnums[i])) {
                            result.push(dontEnums[i]);
                        }
                        }
                    }
                    return result;
                    };
                }());
            }

            // Array.isArray polyfill
            if (!Array.isArray) {
                Array.isArray = function(arg) {
                    return Object.prototype.toString.call(arg) === '[object Array]';
                };
            }
            function errorToString(error) {

            }


        </script>
    </body>
</html>